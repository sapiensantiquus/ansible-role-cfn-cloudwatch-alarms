- hosts: test
  vars:
    cloudwatch_region: "us-west-2"
    cloudwatch_stack_name: ansible-role-cfn-cloudwatch-alarms-testing
    cloudwatch_alarms:
      - name: "MemoryUtilizationAlarm"
        namespace: "System/Linux"
        metric: "MemoryUtilization"
        eval_periods: 1
        statistic: "Minimum"
        threshold: 10
        unit: "Percent"
        period_length: 60
        comparison_operator: "GreaterThanOrEqualToThreshold"
        actions:
          - "{{ cloudwatch_alarm_action_arn }}"
        dimensions:
          - name: "AppName"
            value: "TestCustomMetric"
    security_token: "{{ lookup('env','AWS_SESSION_TOKEN') }}"
  roles:
    - ansible-role-cfn-cloudwatch-alarms
